import{cq as k,bE as V,bF as C,aM as m,q as I,aE as i,u as p,I as o,bx as f,v as n,bc as e,ce as j,H as N,t as g,b3 as B,cn as E,cg as w,cx as O,ao as U,cj as h,s as q,ch as T,cl as z,cy as A,r as D,cw as F}from"./index-DF27jtur.js";class M{static login(v,s){return k.post("api/login",{username:v,password:s},{headers:{"Content-Type":"application/json"}})}}const H={class:"w-5/6 md:1/2 max-w-lg"},L=["name","value"],P={class:"flex text-lg pb-3 items-center"},W=["src"],G=["textContent"],J={class:"relative border-t -ml-4 -mr-4 overflow-hidden"},K={class:"ml-4 mr-4 pt-2 z-10 relative"},Q={class:"text-right"},R={__name:"login",props:{param:{type:Object,default:()=>({})},icon:{type:String,default:void 0},title:{type:String,required:!0},csrf:{type:Object,default:void 0},theme:{type:Object,default:void 0}},setup(t){const s=C().t,y=t,{rememberMeEnabled:S}=window.uiSettings,r=m(""),c=m(""),u=m(null),x=d=>{d.preventDefault(),M.login(r.value,c.value).then(a=>{localStorage.setItem("token",a.data),A(r.value);let l=window.location.href.replace("login.html","applications");l=l.replace("login","applications"),window.location.href=l}).catch(a=>{u.value=a.response.data,localStorage.removeItem("token"),setTimeout(()=>{u.value=null},3e3)})},_=I(()=>y.param.logout!==void 0?s("login.logout_successful"):void 0);return(d,a)=>(i(),p("form",H,[o(e(z),null,{footer:f(()=>[n("div",Q,[o(e(j),{onClick:x},{default:f(()=>[N(" 登录 ")]),_:1})])]),default:f(()=>[t.csrf?(i(),p("input",{key:0,name:t.csrf.parameterName,value:t.csrf.token,type:"hidden"},null,8,L)):g("",!0),n("div",P,[t.icon?(i(),p("img",{key:0,src:t.icon,class:"w-8 h-8 mr-2"},null,8,W)):g("",!0),n("h1",{class:"title has-text-primary",textContent:B(t.title)},null,8,G)]),n("div",J,[o(e(E),{class:"bg-wave--login"}),n("div",K,[o(e(w),{error:u.value},null,8,["error"]),o(e(w),{error:_.value,severity:e(O).INFO},null,8,["error","severity"]),n("div",{class:U([{"has-errors":d.error},"pb-4 form-group"])},[o(e(h),{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),label:e(s)("login.placeholder.username"),autocomplete:"username",name:"username",type:"text",autofocus:""},null,8,["modelValue","label"]),o(e(h),{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=l=>c.value=l),label:e(s)("login.placeholder.password"),autocomplete:"current-password",name:"password",type:"password"},null,8,["modelValue","label"]),e(S)?(i(),q(e(T),{key:0,label:e(s)("login.remember_me"),class:"justify-end",name:"remember-me"},null,8,["label"])):g("",!0)],2)])])]),_:1})]))}},X=V(R,[["__scopeId","data-v-cbf62fcf"]]),b=D(X,{csrf:window.csrf,icon:window.uiSettings.icon,title:window.uiSettings.title,theme:window.uiSettings.theme,param:window.param});b.use(F);b.mount("#login");
//# sourceMappingURL=login-CltNNAN9.js.map
